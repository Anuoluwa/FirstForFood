language: node_js
node_js:
 - "8.11.3"

env:
global: 
  - export NODE_ENV=test 
 
notifications:
  email: 
    false
before_install:
  - psql -c "create user anuoluwa with password 'anuoluwa';" -U postgres
  - psql -c 'create database swiftfoodtest;' -U postgres
  - npm i -g npm@6.3.0

before_script:
  - npm run drop:test
  - npm run migrate:test
    
after_script:
  - npm install -g codeclimate-test-reporter
  - codeclimate-test-reporter < coverage/lcov.info
    
after_success:
- npm run coveralls
